{"is_source_file": true, "format": "TypeScript", "description": "This file defines types and functions for managing notes in a local storage-based notes app, including CRUD operations, seed data, and utility functions.", "external_files": ["localStorage", "window", "Date", "JSON", "crypto"], "external_methods": ["JSON.parse", "Date.now", "Date.prototype.toISOString", "crypto.randomUUID", "Math.random"], "published": ["Note", "NoteCreateInput", "NoteUpdateInput", "ensureSeededNotes", "listNotes", "getNoteById", "createNote", "updateNote", "deleteNote"], "classes": [], "methods": [{"name": "function isBrowser(): boolean { isBrowser", "description": "Checks if the code runs in a browser environment by verifying the existence of window and localStorage.", "scope": "", "scopeKind": ""}, {"name": "function nowIso(): string { nowIso", "description": "Returns the current timestamp in ISO string format.", "scope": "", "scopeKind": ""}, {"name": "function safeJsonParse<T>(raw: string | null): T | null { safeJsonParse", "description": "Safely parses a JSON string into an object, returning null if parsing fails.", "scope": "", "scopeKind": ""}, {"name": "function generateId(): string { generateId", "description": "Generates a unique ID for notes, using crypto.randomUUID if available, otherwise a timestamp and random string.", "scope": "", "scopeKind": ""}, {"name": "function seedNotes(): Note[] { seedNotes", "description": "Creates an initial array of sample notes with timestamps.", "scope": "", "scopeKind": ""}, {"name": "export function createNote(input: NoteCreateInput): Note { createNote", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export function deleteNote(id: string): boolean { deleteNote", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export function ensureSeededNotes(): void { ensureSeededNotes", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export function getNoteById(id: string): Note | undefined { getNoteById", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export function listNotes(): Note[] { listNotes", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function saveAll(notes: Note[]): void { saveAll", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export function updateNote(id: string, patch: NoteUpdateInput): Note | undefined { updateNote", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["isBrowser", "safeJsonParse", "localStorage.getItem", "localStorage.setItem", "generateId", "nowIso"], "search-terms": ["notes storage", "localStorage notes", "notes CRUD functions", "seed notes", "note types", "ID generation", "TypeScript note definitions"], "state": 2, "file_id": 18, "knowledge_revision": 47, "git_revision": "", "ctags": [{"_type": "tag", "name": "Note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^export type Note = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "NoteCreateInput", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^export type NoteCreateInput = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "NoteUpdateInput", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^export type NoteUpdateInput = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^const STORAGE_KEY = \"ocean-notes:v1\";$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "all", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^  const all = listNotes();$/", "language": "TypeScript", "kind": "constant", "scope": "createNote", "scopeKind": "function"}, {"_type": "tag", "name": "all", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^  const all = listNotes();$/", "language": "TypeScript", "kind": "constant", "scope": "deleteNote", "scopeKind": "function"}, {"_type": "tag", "name": "all", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^  const all = listNotes();$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^  const base = nowIso();$/", "language": "TypeScript", "kind": "constant", "scope": "seedNotes", "scopeKind": "function"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^  const content = input.content ?? \"\";$/", "language": "TypeScript", "kind": "constant", "scope": "createNote", "scopeKind": "function"}, {"_type": "tag", "name": "createNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^export function createNote(input: NoteCreateInput): Note {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "createdAt", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^  const createdAt = nowIso();$/", "language": "TypeScript", "kind": "constant", "scope": "createNote", "scopeKind": "function"}, {"_type": "tag", "name": "deleteNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^export function deleteNote(id: string): boolean {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "deleted", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^  const deleted = next.length !== all.length;$/", "language": "TypeScript", "kind": "constant", "scope": "deleteNote", "scopeKind": "function"}, {"_type": "tag", "name": "earlier", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^  const earlier = new Date(Date.now() - 1000 * 60 * 60 * 2).toISOString();$/", "language": "TypeScript", "kind": "constant", "scope": "seedNotes", "scopeKind": "function"}, {"_type": "tag", "name": "ensureSeededNotes", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^export function ensureSeededNotes(): void {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "existing", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^  const existing = safeJsonParse<Note[]>(localStorage.getItem(STORAGE_KEY));$/", "language": "TypeScript", "kind": "constant", "scope": "ensureSeededNotes", "scopeKind": "function"}, {"_type": "tag", "name": "generateId", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^function generateId(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getNoteById", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^export function getNoteById(id: string): Note | undefined {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^  const idx = all.findIndex((n) => n.id === id);$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^  const prev = all[idx];$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "isBrowser", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^function isBrowser(): boolean {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "listNotes", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^export function listNotes(): Note[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^  const next = all.filter((n) => n.id !== id);$/", "language": "TypeScript", "kind": "constant", "scope": "deleteNote", "scopeKind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^  const next: Note = {$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^  const note: Note = {$/", "language": "TypeScript", "kind": "constant", "scope": "createNote", "scopeKind": "function"}, {"_type": "tag", "name": "nowIso", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^function nowIso(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "parsed", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^  const parsed = safeJsonParse<Note[]>(localStorage.getItem(STORAGE_KEY));$/", "language": "TypeScript", "kind": "constant", "scope": "listNotes", "scopeKind": "function"}, {"_type": "tag", "name": "prev", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^  const prev = all[idx];$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "safeJsonParse", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^function safeJsonParse<T>(raw: string | null): T | null {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "saveAll", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^function saveAll(notes: Note[]): void {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "seedNotes", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^function seedNotes(): Note[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^    title:$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^  const title = (input.title ?? \"\").trim();$/", "language": "TypeScript", "kind": "constant", "scope": "createNote", "scopeKind": "function"}, {"_type": "tag", "name": "updateNote", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^export function updateNote(id: string, patch: NoteUpdateInput): Note | undefined {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "yesterday", "path": "/home/kavia/workspace/code-generation/simple-notes-app-197620-197666/notes_frontend/src/lib/notes.ts", "pattern": "/^  const yesterday = new Date(Date.now() - 1000 * 60 * 60 * 24).toISOString();$/", "language": "TypeScript", "kind": "constant", "scope": "seedNotes", "scopeKind": "function"}], "hash": "1c6b7d38b6a4362189b6d04c33004c98", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/lib/notes.ts", "revision_history": [{"47": ""}]}